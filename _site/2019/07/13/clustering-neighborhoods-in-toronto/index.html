<!DOCTYPE html><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Clustering Neighborhoods in Toronto based on their locations using K-Means | SWC - Data Science</title><meta name="author" content="Sangwook Cheon"><meta name="description" content="N(one)-Stop Data Science"><meta property="og:title" content="Clustering Neighborhoods in Toronto based on their locations using K-Means | SWC - Data Science"><meta property="og:url" content="http://localhost:4000/2019/07/13/clustering-neighborhoods-in-toronto/"><meta property="og:site_name" content="SWC - Data Science"><meta property="og:description" content="Using K-Means Clustering, segment neighborhoods in Toronto based on their locations"><meta property="og:image" content="/images/vidar-nordli-mathisen-kcM_-FmnsVo-unsplash (1).jpg"><meta property="og:type" content="blog"><meta name="twitter:card" content="summary"><meta name="twitter:description" content="Using K-Means Clustering, segment neighborhoods in Toronto based on their locations"><meta name="twitter:title" content="Clustering Neighborhoods in Toronto based on their locations using K-Means | SWC - Data Science"><meta name="twitter:url" content="http://localhost:4000/2019/07/13/clustering-neighborhoods-in-toronto/"><meta name="twitter:site" content="SWC - Data Science"><meta name="twitter:creator" content="@"><meta name="twitter:domain" content="http://localhost:4000"><meta property="twitter:image" content="/images/vidar-nordli-mathisen-kcM_-FmnsVo-unsplash (1).jpg"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Lora|Space+Mono:700"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" href="/assets/css/main.css"><link rel="alternate" type="application/rss+xml" title="SWC - Data Science" href="http://localhost:4000/feed.xml"><link rel="canonical" href="http://localhost:4000/2019/07/13/clustering-neighborhoods-in-toronto/"></head><main><style media="screen"> #particles-js { background-image: url('/images/vidar-nordli-mathisen-kcM_-FmnsVo-unsplash (1).jpg'); background-color: $color-black; background-repeat: no-repeat; background-size: cover; background-position: 50%; animation: fade-in 3s both; position: absolute; top: 0; left: 0; height: 100%; width: 100%; background-size: cover; background-repeat: no-repeat; /* background-position: 50%; */ @media not all and (hover:hover) { height: var(--app-height); } @media (min-width: 30em) { height: 35em; } &:after { @extend %overlay; } &__img { animation: fade-in 2s both; } &__container { display: flex; flex-direction: column; justify-content: flex-end; height: 100%; width: 90%; margin: 0 auto; } } p { font-size: 1.114em; margin-bottom: 1.3em; } ol, ul { margin: 1em; padding: 0; font-size: 1.114em; } .centered { position: absolute; top: 17.5em; left: 5%; width: 80%; justify-content: flex-end; margin: 0 auto; flex-direction: column; /* transform: translate(-50%, -50%); */ } .bottom-left { position: absolute; top: 40%; left: 10%; } html { scroll-behavior: smooth; } mark { background-color: $color-alpha; color: $color-black; padding: 2px; border-radius: 5px; }</style><article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting"><header class="mast rellax" data-rellax-speed="-4"> <a class="nav nav--white" href="/"> <i class="fa fa-lg fa-arrow-left"></i> <span>Back to Posts</span> </a><div id='particles-js'></div><div class="mast__container"> <br> <span style="color:#ffffff"><time datetime="2019-07-13T00:00:00+07:00" itemprop="datePublished">Jul 13, 2019</time></span><h1 style="font-family: $font-header;color:#ffffff" itemprop="name headline">Clustering Neighborhoods in Toronto based on their locations using K-Means</h1><h2 style="font-family: $font-header; color:#F59835" itemprop="name headline">By Sangwook Cheon</h2><span style="color:#ffffff; font-size:1.114em;">Posted in <a class="nav--white" href="/category/learn-ds"><mark>Learn-DS</mark></a>, <a class="nav--white" href="/category/clustering"><mark>Clustering</mark></a> </span> <span></span> <br></div></header><section class="section-padding bg-grey" itemprop="articleBody"><div class="post"><h1 id="introduction">Introduction</h1><p>Previous articles leading up to this post:</p><ol><li><a href="https://sangwookcheon.github.io/2019/07/12/web-scraping-using-beautiful-soup/p">Web-scraping a Wikipedia article using Beautiful Soup - Table</a></li><li><a href="https://sangwookcheon.github.io/2019/07/12/geopy-adding-latitude-longitude/">Adding Latitude and Longitude given a location using Geocoder library</a></li></ol><p>In this post I will use a cleaned dataset created from the previous two articles and cluster neighborhoods in Toronto based on their locations. I will use K-Means clustering, a popular unsupervised machine learning technique.</p><p>First step is to install all the libraries needed for this project:</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span> <span class="c"># library to handle data in a vectorized manner</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span> <span class="c"># library for data analsysis</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">'display.max_columns'</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">'display.max_rows'</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">json</span> <span class="c"># library to handle JSON files</span>

<span class="c">#!conda install -c conda-forge geopy --yes # uncomment this line if you haven't completed the Foursquare API lab</span>
<span class="kn">from</span> <span class="nn">geopy.geocoders</span> <span class="kn">import</span> <span class="n">Nominatim</span> <span class="c"># convert an address into latitude and longitude values</span>

<span class="kn">import</span> <span class="nn">requests</span> <span class="c"># library to handle requests</span>
<span class="kn">from</span> <span class="nn">pandas.io.json</span> <span class="kn">import</span> <span class="n">json_normalize</span> <span class="c"># tranform JSON file into a pandas dataframe</span>

<span class="c"># Matplotlib and associated plotting modules</span>
<span class="kn">import</span> <span class="nn">matplotlib.cm</span> <span class="k">as</span> <span class="n">cm</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="n">colors</span>

<span class="c"># import k-means from clustering stage</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">KMeans</span>

<span class="c">#!conda install -c conda-forge folium=0.5.0 --yes # uncomment this line if you haven't completed the Foursquare API lab</span>
<span class="kn">import</span> <span class="nn">folium</span> <span class="c"># map rendering library</span>
</code></pre></div></div><p>In the previous articles, I scraped a Wikipedia page containing a table about Neighborhoods in Canada, processed the table, and added latitude/longitude coordinates for each Postal Code. Below is the table to work with:</p><p><img src="/in-post-images/Screen Shot 2019-07-13 at 11.45.23.png" alt="" /></p><p>I named this table <code class="highlighter-rouge">neighborhoods</code>. I decided to use data pertaining only to Toronto, so I now need to get rows with borough names that contain ‘Toronto’. To do this:</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">neighborhoods</span><span class="p">)):</span>
    <span class="k">if</span> <span class="s">'Toronto'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">neighborhoods</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s">'Borough'</span><span class="p">]:</span>
        <span class="n">neighborhoods</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">neighborhood</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div><p>Now we have this new table: <img src="/in-post-images/Screen Shot 2019-07-13 at 16.11.20.png" alt="" /></p><p>There are 37 columns in total, and I used <code class="highlighter-rouge">reset_index</code> function reset the index to 1, 2, 3, … as the table was modified.</p><p>Let’s start by visualizing where the different neighborhoods are in Toronto. After quick Google Search, it is found that the lat-long of Toronto is [43.6532, -79.3832].</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">latitude</span> <span class="o">=</span> <span class="mf">43.6532</span>
<span class="n">longitude</span> <span class="o">=</span> <span class="o">-</span><span class="mf">79.3832</span>

<span class="c"># create map of Toronto using latitude and longitude values</span>
<span class="n">map_toronto</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">],</span> <span class="n">zoom_start</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c"># add markers to map</span>
<span class="k">for</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lng</span><span class="p">,</span> <span class="n">borough</span><span class="p">,</span> <span class="n">neighborhood</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">neighborhoods</span><span class="p">[</span><span class="s">'Latitude'</span><span class="p">],</span> <span class="n">neighborhoods</span><span class="p">[</span><span class="s">'Longitude'</span><span class="p">],</span> <span class="n">neighborhoods</span><span class="p">[</span><span class="s">'Borough'</span><span class="p">],</span> <span class="n">neighborhoods</span><span class="p">[</span><span class="s">'Neighborhood'</span><span class="p">]):</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s">'{}, {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">neighborhood</span><span class="p">,</span> <span class="n">borough</span><span class="p">)</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Popup</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">parse_html</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">folium</span><span class="o">.</span><span class="n">CircleMarker</span><span class="p">(</span>
        <span class="p">[</span><span class="n">lat</span><span class="p">,</span> <span class="n">lng</span><span class="p">],</span>
        <span class="n">radius</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">popup</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="s">'blue'</span><span class="p">,</span>
        <span class="n">fill</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">fill_color</span><span class="o">=</span><span class="s">'#3186cc'</span><span class="p">,</span>
        <span class="n">fill_opacity</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
        <span class="n">parse_html</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">map_toronto</span><span class="p">)</span>

<span class="n">map_toronto</span>
</code></pre></div></div><p><img src="/in-post-images/Screen Shot 2019-07-13 at 16.38.16.png" alt="" /> <a href="">View Map</a></p><div id="disqus_thread"></div><script> var disqus_config = function () { this.page.url = "http://localhost:4000/2019/07/13/clustering-neighborhoods-in-toronto/"; this.page.identifier = "/2019/07/13/clustering-neighborhoods-in-toronto"; }; (function() { var d = document, s = d.createElement('script'); s.src = 'https://sangwookcheon.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section><section class="profile"><div class="profile__card"><div class="profile__img"><figure class="absolute-bg" style="background-image: url('/images/SangwookCpic.png');"></figure></div><div class="profile__container"><p>My name is Sangwook Cheon, a high school student at Jakarta Intercultural School. After tinkering with various branches of technology, I discovered that I am most passionate about data. All kinds of data, from so well-known to absolutely obscure. I work with Python to extract and interact with numbers, texts, images, audio, and more to come soon.</p><ul class="profile__social"><li><a class="fa fa-lg fa-envelope-o" href="mailto:sangwookchn@gmail.com"></a></li><li><h3><a href="https://kaggle.com/sangwookchn">k</a></h3></li><li><a class="fa fa-lg fa-github" href="https://github.com/SangwookCheon" target="_blank"></a></li><li><a class="fa fa-lg fa-linkedin" href="https://www.linkedin.com/in/sangwookcheon/" target="_blank"></a></li><li><a class="fa fa-lg fa-medium" href="https://medium.com/@sangwookcheon" target="_blank"></a></li></ul></div></div></section></article><section class="next"> <a class="next__link" href="/2019/07/12/web-scraping-using-beautiful-soup/" style="background-image: url('/images/roman-romashov-GRxTDmbsJRM-unsplash (1).jpg');"><div class="next__container"> <span style="color:#ffffff;">Read Next</span><h3 style="color:#ffffff">Web-scraping a Wikipedia article using Beautiful Soup - Table</h3></div></a></section></main><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/rellax/1.0.0/rellax.min.js"></script> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script> <script src="//cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script> <script> particlesJS.load('particles-js', "/assets/js/particles.json", function() { console.log('callback - particles.js config loaded'); }); </script> <script type="text/javascript" src="/assets/js/app.js"></script></body></html>
